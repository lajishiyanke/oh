# 操作系统
    操作系统定义：管理软件、硬件资源，提供用户和其他软件方便的接口和环境
    内核态、用户态
    并发（宏观上同时、微观上交替）、共享、虚拟（空分复用、时分复用）、异步（资源有限走走停停）
    应用程序、内核程序 中断作用：让CPU从用户态变为内核态。异常（也叫内中断，与当前执行的指令有关，CPU内部）、中断
    系统调用（凡是与共享资源有关的操作都需要系统调用，保证系统的稳定性和安全性。陷入指令，先传参指明哪种类型的系统调用，然后执行陷入指令）
    大内核：高性能，代码庞大 微内核：代码少，性能低
![](2023-09-04-09-54-02.png)
![](2023-09-04-10-07-17.png)
![](2023-09-04-10-10-45.png)
程序（静态，一系列指令集合）进程（动态，同个程序多次运行有多个进程）进程创建时会创建PCB（进程控制块，给操作系统用的）、程序段（指令）、数据段(运行中产生的数据)[程序段、数据段进程自己用]
![](2023-09-04-10-24-24.png)
![](2023-09-04-10-35-16.png)
原语的原子性[一气呵成，不允许被中断]实现方式：用开、关中断两种特权指令实现
进程通信：共享存储、消息传递、管道通信
线程：程序执行流的最小单位[调度的基本单位]，TCB[线程控制块] 进程[资源分配的基本单位]，切换进程开销比切换线程大，线程共享进程的资源
![](2023-09-04-11-27-30.png)
用户级线程：代码逻辑 内核级线程：运行机会，操作系统看到的线程 一对多模型[无需切换到核心态，并发低，多个线程无法在多个CPU上运行] 一对一模型[并发高，可同时多CPU运行，切换核心态的开销大]
挂起：不执行的进程调到外存
三层调度：高级调度、中级调度、低级调度
![](2023-09-04-16-47-13.png)
![](2023-09-04-20-29-34.png)
作业调度[后备队列]进程调度[就绪队列]
周转时间、带权周转时间、等待时间、响应时间
先来先服务 短作业优先 高响应比优先（响应比=服务时间+等待时间/服务时间）时间片轮转、优先级调度
![](2023-09-04-20-47-46.png)
![](2023-09-04-21-45-00.png)
![](2023-09-04-21-48-55.png)
![](2023-09-04-21-55-43.png)
同步[进程有时需要遵循一定的先后顺序]、互斥[访问临界资源要互斥进行]
临界资源：一个时间段内只允许一个进程使用的资源
单标志法[违反空闲让进]双先检查标志法[违反忙则等待，先检查后上锁，可能导致两个进程同时进入临界区]
![](2023-09-05-10-05-30.png)
![](2023-09-05-10-09-35.png)
![](2023-09-05-10-21-53.png)
![](2023-09-05-10-30-03.png)
以上都无法实现[让权等待]
信号量：系统中某种资源的数量，用原语对信号量进行操作
![](2023-09-05-11-02-39.png)
![](2023-09-05-11-30-10.png)
![](2023-09-05-11-44-35.png)
死锁必要条件：互斥、不可剥夺、请求和保持、循环等待[对不可剥夺资源的不合理分配]

银行家算法：
![](2023-09-11-09-19-53.png)

内存装入的三种方式：
1.绝对装入（绝对地址）2.静态重定位（装入时逻辑地址一次性变为绝对地址，要求一次性分配全部的内存空间，起始地址不可变）3.动态重定位（程序执行时逻辑地址变为绝对地址，用重定位寄存器存放起始地址，可变）

编译和链接：
![](2023-09-11-21-23-15.png)
![](2023-09-11-21-35-16.png)

坐标: 基准 22 :660.,55.,3.
坐标: 基准 30 :660.,-50.,3.
坐标: 基准 23 :660.,45.,3.
坐标: 基准 24 :660.,55.,1.

![](2023-09-12-11-37-55.png)

内部碎片[分配给进程的内存区域中有些部分没有用上]外部碎片[内存中某些空闲分区由于太小而难以利用]